.data
oobMessageStart: .asciiz "ERREUR: Indice en dehors des limites du tableau : indice = "
oobMessageEnd: .asciiz "\n"
stringVrai: .asciiz "1"
stringFaux: .asciiz "0"
aLaLigne: .asciiz ", à la ligne "

.text
main:
#Programme testun

#Declarations
move $s7, $sp
add $sp, $s7, -76

#Instructions
#Sauvegarde de ligne
li $s6, 9

#Affectation : Var(a) = Num(1)
#Load Num(1)
li $v0, 1
#Store Var(a)
sw $v0, 0($s7)

#Sauvegarde de ligne
li $s6, 10

#Affectation : Var(b) = Num(2)
#Load Num(2)
li $v0, 2
#Store Var(b)
sw $v0, -4($s7)

#Sauvegarde de ligne
li $s6, 11

#Affectation : Var(c) = Num(3)
#Load Num(3)
li $v0, 3
#Store Var(c)
sw $v0, -8($s7)

#Sauvegarde de ligne
li $s6, 13

#Affectation : Var(tab)[Num(0)] = Var(a)
#Load Var(a)
lw $v0, 0($s7)
#Sauvegarde du tableau tab [ Num(0) ] 
#On empile
sw $v0, ($sp)
sub $sp, $sp, 4

#Load Num(0)
li $v0, 0
#Check indice
blt $v0, 0, oob
bge $v0, 3, oob

li $s1, -16
add $s1, $s1, $s7 
li $v1, -4
mult $v0, $v1
mflo $v0
add $s1, $s1, $v0
#On depile
add $sp, $sp, 4
lw $v0, ($sp)

sw $v0, ($s1)

#Sauvegarde de ligne
li $s6, 14

#Affectation : Var(tab)[Var(a)] = Var(b)
#Load Var(b)
lw $v0, -4($s7)
#Sauvegarde du tableau tab [ Var(a) ] 
#On empile
sw $v0, ($sp)
sub $sp, $sp, 4

#Load Var(a)
lw $v0, 0($s7)
#Check indice
blt $v0, 0, oob
bge $v0, 3, oob

li $s1, -16
add $s1, $s1, $s7 
li $v1, -4
mult $v0, $v1
mflo $v0
add $s1, $s1, $v0
#On depile
add $sp, $sp, 4
lw $v0, ($sp)

sw $v0, ($s1)

#Sauvegarde de ligne
li $s6, 15

#Affectation : Var(tab)[Var(b)] = Var(c)
#Load Var(c)
lw $v0, -8($s7)
#Sauvegarde du tableau tab [ Var(b) ] 
#On empile
sw $v0, ($sp)
sub $sp, $sp, 4

#Load Var(b)
lw $v0, -4($s7)
#Check indice
blt $v0, 0, oob
bge $v0, 3, oob

li $s1, -16
add $s1, $s1, $s7 
li $v1, -4
mult $v0, $v1
mflo $v0
add $s1, $s1, $v0
#On depile
add $sp, $sp, 4
lw $v0, ($sp)

sw $v0, ($s1)

#Sauvegarde de ligne
li $s6, 16

#Affectation : Var(tb)[Num(0)] = Num(0)
#Load Num(0)
li $v0, 0
#Sauvegarde du tableau tb [ Num(0) ] 
#On empile
sw $v0, ($sp)
sub $sp, $sp, 4

#Load Num(0)
li $v0, 0
#Check indice
blt $v0, 0, oob
bge $v0, 12, oob

li $s1, -28
add $s1, $s1, $s7 
li $v1, -4
mult $v0, $v1
mflo $v0
add $s1, $s1, $v0
#On depile
add $sp, $sp, 4
lw $v0, ($sp)

sw $v0, ($s1)

#Sauvegarde de ligne
li $s6, 17

#Affectation : Var(tb)[Var(tab)[Var(tb)[Num(0)]]] = Var(a)
#Load Var(a)
lw $v0, 0($s7)
#Sauvegarde du tableau tb [ Var(tab)[Var(tb)[Num(0)]] ] 
#On empile
sw $v0, ($sp)
sub $sp, $sp, 4

#Acces au tableau tab [ Var(tb)[Num(0)] ] 
#On empile
sw $v0, ($sp)
sub $sp, $sp, 4

#Acces au tableau tb [ Num(0) ] 
#On empile
sw $v0, ($sp)
sub $sp, $sp, 4

#Load Num(0)
li $v0, 0
#Check indice
blt $v0, 0, oob
bge $v0, 12, oob

li $s1, -28
add $s1, $s1, $s7 
li $v1, -4
mult $v0, $v1
mflo $v0
add $s1, $s1, $v0
#On depile
add $sp, $sp, 4
lw $v0, ($sp)

lw $v0, ($s1)
#Check indice
blt $v0, 0, oob
bge $v0, 3, oob

li $s1, -16
add $s1, $s1, $s7 
li $v1, -4
mult $v0, $v1
mflo $v0
add $s1, $s1, $v0
#On depile
add $sp, $sp, 4
lw $v0, ($sp)

lw $v0, ($s1)
#Check indice
blt $v0, 0, oob
bge $v0, 12, oob

li $s1, -28
add $s1, $s1, $s7 
li $v1, -4
mult $v0, $v1
mflo $v0
add $s1, $s1, $v0
#On depile
add $sp, $sp, 4
lw $v0, ($sp)

sw $v0, ($s1)

#Sauvegarde de ligne
li $s6, 18

#Affectation : Var(tb)[Var(b)] = Var(b)
#Load Var(b)
lw $v0, -4($s7)
#Sauvegarde du tableau tb [ Var(b) ] 
#On empile
sw $v0, ($sp)
sub $sp, $sp, 4

#Load Var(b)
lw $v0, -4($s7)
#Check indice
blt $v0, 0, oob
bge $v0, 12, oob

li $s1, -28
add $s1, $s1, $s7 
li $v1, -4
mult $v0, $v1
mflo $v0
add $s1, $s1, $v0
#On depile
add $sp, $sp, 4
lw $v0, ($sp)

sw $v0, ($s1)

#Sauvegarde de ligne
li $s6, 19

#Affectation : Var(tb)[Num(11)] = Num(11)
#Load Num(11)
li $v0, 11
#Sauvegarde du tableau tb [ Num(11) ] 
#On empile
sw $v0, ($sp)
sub $sp, $sp, 4

#Load Num(11)
li $v0, 11
#Check indice
blt $v0, 0, oob
bge $v0, 12, oob

li $s1, -28
add $s1, $s1, $s7 
li $v1, -4
mult $v0, $v1
mflo $v0
add $s1, $s1, $v0
#On depile
add $sp, $sp, 4
lw $v0, ($sp)

sw $v0, ($s1)

#Sauvegarde de ligne
li $s6, 21

#Affectation : Var(a) = Var(tab)[Num(2)]
#Acces au tableau tab [ Num(2) ] 
#On empile
sw $v0, ($sp)
sub $sp, $sp, 4

#Load Num(2)
li $v0, 2
#Check indice
blt $v0, 0, oob
bge $v0, 3, oob

li $s1, -16
add $s1, $s1, $s7 
li $v1, -4
mult $v0, $v1
mflo $v0
add $s1, $s1, $v0
#On depile
add $sp, $sp, 4
lw $v0, ($sp)

lw $v0, ($s1)
#Store Var(a)
sw $v0, 0($s7)

#Sauvegarde de ligne
li $s6, 22

#Affectation : Var(b) = Var(tab)[Num(0)]
#Acces au tableau tab [ Num(0) ] 
#On empile
sw $v0, ($sp)
sub $sp, $sp, 4

#Load Num(0)
li $v0, 0
#Check indice
blt $v0, 0, oob
bge $v0, 3, oob

li $s1, -16
add $s1, $s1, $s7 
li $v1, -4
mult $v0, $v1
mflo $v0
add $s1, $s1, $v0
#On depile
add $sp, $sp, 4
lw $v0, ($sp)

lw $v0, ($s1)
#Store Var(b)
sw $v0, -4($s7)

#Sauvegarde de ligne
li $s6, 23

#Affectation : Var(tab)[Num(0)] = Var(tb)[Num(0)]
#Acces au tableau tb [ Num(0) ] 
#On empile
sw $v0, ($sp)
sub $sp, $sp, 4

#Load Num(0)
li $v0, 0
#Check indice
blt $v0, 0, oob
bge $v0, 12, oob

li $s1, -28
add $s1, $s1, $s7 
li $v1, -4
mult $v0, $v1
mflo $v0
add $s1, $s1, $v0
#On depile
add $sp, $sp, 4
lw $v0, ($sp)

lw $v0, ($s1)
#Sauvegarde du tableau tab [ Num(0) ] 
#On empile
sw $v0, ($sp)
sub $sp, $sp, 4

#Load Num(0)
li $v0, 0
#Check indice
blt $v0, 0, oob
bge $v0, 3, oob

li $s1, -16
add $s1, $s1, $s7 
li $v1, -4
mult $v0, $v1
mflo $v0
add $s1, $s1, $v0
#On depile
add $sp, $sp, 4
lw $v0, ($sp)

sw $v0, ($s1)

#Sauvegarde de ligne
li $s6, 25

#Ecrire : Var(a)
#Load Var(a)
lw $v0, 0($s7)
move $a0, $v0
li $v0, 1

syscall
#Retour à la ligne
li $v0, 11
li $a0, '\n'
syscall

#Sauvegarde de ligne
li $s6, 26

#Ecrire : Var(b)
#Load Var(b)
lw $v0, -4($s7)
move $a0, $v0
li $v0, 1

syscall
#Retour à la ligne
li $v0, 11
li $a0, '\n'
syscall

#Sauvegarde de ligne
li $s6, 27

#Ecrire : Var(c)
#Load Var(c)
lw $v0, -8($s7)
move $a0, $v0
li $v0, 1

syscall
#Retour à la ligne
li $v0, 11
li $a0, '\n'
syscall

#Sauvegarde de ligne
li $s6, 29

#Affectation : Var(d) = Var(tab)[Num(0)]
#Acces au tableau tab [ Num(0) ] 
#On empile
sw $v0, ($sp)
sub $sp, $sp, 4

#Load Num(0)
li $v0, 0
#Check indice
blt $v0, 0, oob
bge $v0, 3, oob

li $s1, -16
add $s1, $s1, $s7 
li $v1, -4
mult $v0, $v1
mflo $v0
add $s1, $s1, $v0
#On depile
add $sp, $sp, 4
lw $v0, ($sp)

lw $v0, ($s1)
#Store Var(d)
sw $v0, -12($s7)

#Sauvegarde de ligne
li $s6, 30

#Ecrire : Var(d)
#Load Var(d)
lw $v0, -12($s7)
move $a0, $v0
li $v0, 1

syscall
#Retour à la ligne
li $v0, 11
li $a0, '\n'
syscall

#Sauvegarde de ligne
li $s6, 31

#Affectation : Var(d) = Var(tab)[Var(tab)[Num(0)]]
#Acces au tableau tab [ Var(tab)[Num(0)] ] 
#On empile
sw $v0, ($sp)
sub $sp, $sp, 4

#Acces au tableau tab [ Num(0) ] 
#On empile
sw $v0, ($sp)
sub $sp, $sp, 4

#Load Num(0)
li $v0, 0
#Check indice
blt $v0, 0, oob
bge $v0, 3, oob

li $s1, -16
add $s1, $s1, $s7 
li $v1, -4
mult $v0, $v1
mflo $v0
add $s1, $s1, $v0
#On depile
add $sp, $sp, 4
lw $v0, ($sp)

lw $v0, ($s1)
#Check indice
blt $v0, 0, oob
bge $v0, 3, oob

li $s1, -16
add $s1, $s1, $s7 
li $v1, -4
mult $v0, $v1
mflo $v0
add $s1, $s1, $v0
#On depile
add $sp, $sp, 4
lw $v0, ($sp)

lw $v0, ($s1)
#Store Var(d)
sw $v0, -12($s7)

#Sauvegarde de ligne
li $s6, 32

#Ecrire : Var(d)
#Load Var(d)
lw $v0, -12($s7)
move $a0, $v0
li $v0, 1

syscall
#Retour à la ligne
li $v0, 11
li $a0, '\n'
syscall

#Sauvegarde de ligne
li $s6, 33

#Affectation : Var(d) = Var(tab)[Var(b)]
#Acces au tableau tab [ Var(b) ] 
#On empile
sw $v0, ($sp)
sub $sp, $sp, 4

#Load Var(b)
lw $v0, -4($s7)
#Check indice
blt $v0, 0, oob
bge $v0, 3, oob

li $s1, -16
add $s1, $s1, $s7 
li $v1, -4
mult $v0, $v1
mflo $v0
add $s1, $s1, $v0
#On depile
add $sp, $sp, 4
lw $v0, ($sp)

lw $v0, ($s1)
#Store Var(d)
sw $v0, -12($s7)

#Sauvegarde de ligne
li $s6, 34

#Ecrire : Var(d)
#Load Var(d)
lw $v0, -12($s7)
move $a0, $v0
li $v0, 1

syscall
#Retour à la ligne
li $v0, 11
li $a0, '\n'
syscall

#Sauvegarde de ligne
li $s6, 35

#Affectation : Var(d) = Var(tab)[Num(2)]
#Acces au tableau tab [ Num(2) ] 
#On empile
sw $v0, ($sp)
sub $sp, $sp, 4

#Load Num(2)
li $v0, 2
#Check indice
blt $v0, 0, oob
bge $v0, 3, oob

li $s1, -16
add $s1, $s1, $s7 
li $v1, -4
mult $v0, $v1
mflo $v0
add $s1, $s1, $v0
#On depile
add $sp, $sp, 4
lw $v0, ($sp)

lw $v0, ($s1)
#Store Var(d)
sw $v0, -12($s7)

#Sauvegarde de ligne
li $s6, 36

#Ecrire : Var(d)
#Load Var(d)
lw $v0, -12($s7)
move $a0, $v0
li $v0, 1

syscall
#Retour à la ligne
li $v0, 11
li $a0, '\n'
syscall

#Sauvegarde de ligne
li $s6, 38

#Affectation : Var(d) = Var(tb)[Var(tb)[Var(tb)[Num(0)]]]
#Acces au tableau tb [ Var(tb)[Var(tb)[Num(0)]] ] 
#On empile
sw $v0, ($sp)
sub $sp, $sp, 4

#Acces au tableau tb [ Var(tb)[Num(0)] ] 
#On empile
sw $v0, ($sp)
sub $sp, $sp, 4

#Acces au tableau tb [ Num(0) ] 
#On empile
sw $v0, ($sp)
sub $sp, $sp, 4

#Load Num(0)
li $v0, 0
#Check indice
blt $v0, 0, oob
bge $v0, 12, oob

li $s1, -28
add $s1, $s1, $s7 
li $v1, -4
mult $v0, $v1
mflo $v0
add $s1, $s1, $v0
#On depile
add $sp, $sp, 4
lw $v0, ($sp)

lw $v0, ($s1)
#Check indice
blt $v0, 0, oob
bge $v0, 12, oob

li $s1, -28
add $s1, $s1, $s7 
li $v1, -4
mult $v0, $v1
mflo $v0
add $s1, $s1, $v0
#On depile
add $sp, $sp, 4
lw $v0, ($sp)

lw $v0, ($s1)
#Check indice
blt $v0, 0, oob
bge $v0, 12, oob

li $s1, -28
add $s1, $s1, $s7 
li $v1, -4
mult $v0, $v1
mflo $v0
add $s1, $s1, $v0
#On depile
add $sp, $sp, 4
lw $v0, ($sp)

lw $v0, ($s1)
#Store Var(d)
sw $v0, -12($s7)

#Sauvegarde de ligne
li $s6, 39

#Ecrire : Var(d)
#Load Var(d)
lw $v0, -12($s7)
move $a0, $v0
li $v0, 1

syscall
#Retour à la ligne
li $v0, 11
li $a0, '\n'
syscall

#Sauvegarde de ligne
li $s6, 40

#Affectation : Var(d) = Var(tb)[Num(1)]
#Acces au tableau tb [ Num(1) ] 
#On empile
sw $v0, ($sp)
sub $sp, $sp, 4

#Load Num(1)
li $v0, 1
#Check indice
blt $v0, 0, oob
bge $v0, 12, oob

li $s1, -28
add $s1, $s1, $s7 
li $v1, -4
mult $v0, $v1
mflo $v0
add $s1, $s1, $v0
#On depile
add $sp, $sp, 4
lw $v0, ($sp)

lw $v0, ($s1)
#Store Var(d)
sw $v0, -12($s7)

#Sauvegarde de ligne
li $s6, 41

#Ecrire : Var(d)
#Load Var(d)
lw $v0, -12($s7)
move $a0, $v0
li $v0, 1

syscall
#Retour à la ligne
li $v0, 11
li $a0, '\n'
syscall

#Sauvegarde de ligne
li $s6, 42

#Affectation : Var(d) = Var(tb)[Num(2)]
#Acces au tableau tb [ Num(2) ] 
#On empile
sw $v0, ($sp)
sub $sp, $sp, 4

#Load Num(2)
li $v0, 2
#Check indice
blt $v0, 0, oob
bge $v0, 12, oob

li $s1, -28
add $s1, $s1, $s7 
li $v1, -4
mult $v0, $v1
mflo $v0
add $s1, $s1, $v0
#On depile
add $sp, $sp, 4
lw $v0, ($sp)

lw $v0, ($s1)
#Store Var(d)
sw $v0, -12($s7)

#Sauvegarde de ligne
li $s6, 43

#Ecrire : Var(d)
#Load Var(d)
lw $v0, -12($s7)
move $a0, $v0
li $v0, 1

syscall
#Retour à la ligne
li $v0, 11
li $a0, '\n'
syscall

#Sauvegarde de ligne
li $s6, 44

#Affectation : Var(d) = Var(tb)[Num(11)]
#Acces au tableau tb [ Num(11) ] 
#On empile
sw $v0, ($sp)
sub $sp, $sp, 4

#Load Num(11)
li $v0, 11
#Check indice
blt $v0, 0, oob
bge $v0, 12, oob

li $s1, -28
add $s1, $s1, $s7 
li $v1, -4
mult $v0, $v1
mflo $v0
add $s1, $s1, $v0
#On depile
add $sp, $sp, 4
lw $v0, ($sp)

lw $v0, ($s1)
#Store Var(d)
sw $v0, -12($s7)

#Sauvegarde de ligne
li $s6, 45

#Ecrire : Var(d)
#Load Var(d)
lw $v0, -12($s7)
move $a0, $v0
li $v0, 1

syscall
#Retour à la ligne
li $v0, 11
li $a0, '\n'
syscall



#Fin d'execution 
end:
li $v0, 10
syscall

#Exceptions
oob:
move $s1, $v0
la $a0, oobMessageStart
li $v0, 4
syscall
move $a0, $s1
li $v0, 1
syscall
la $a0, aLaLigne
li $v0, 4
syscall
move $a0, $s6
li $v0, 1
syscall
la $a0, oobMessageEnd
li $v0, 4
syscall
b end
